<!DOCTYPE html>
<html lang="cs">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
        <article>
            <h1>PiechartElement</h1>
            <inhe-info oa>HTMLElement-Element-Node-EventTarget</inhe-info>
            <p id="small-desc">
                Element grafu, který se implementuje do DOM dokumentu,
                pomocí zděděné třídy.
            </p>

            <div class="section description" id="description">
                <h2>Popis</h2>
                <div>
                    <p>
                        Element je definován <s-c>pie-chart</s-c> jménem,
                        který se implementuje do DOM dokumentu s attributy. Jméno nám spouští
                        tuto třídu, která <a href="?TDRenderer">vykresluje</a> piechart graf.
                    </p>
                    <br>
                    <iframe id="graph" src="./examples/piechart.html" frameborder="0"></iframe>
                    <cust-piechart></cust-piechart>
                    <br>
                    <note-info>
                        <p>
                            Graf zobrazuje průměrnou rychlost stahování v Mb/s.
                        </p>
                    </note-info>
                </div>
            </div>

            <div class="section" id="exaples">
                <h2>Příklad</h2>
                <light-code nocompile>
<span class="kwd">&lt;body</span>
    <span class="kwd">&lt;pie-chart</span>
        <span class="pln">data=</span><span id="code-data" class="str"></span>
        <span class="pln">widthRadius=</span><span class="str">"110"</span><span class="kwd">&gt;</span>
    <span class="kwd">&lt;/pie-chart&gt;</span>
<span class="kwd">&lt;/body&gt;</span>
                </light-code>
            </div>

            <prop-table name="Vlastnosti">
                <prop lambda type="o:function" name="removeHandler"></prop>
                <prop lambda type="o:function" name="hiddeHandler"></prop>
                <prop lambda type="o:function" name="isReadyHandler"></prop>
                <prop lambda type="o:function" name="resizeHandler"></prop>
                <prop type="o:array" name="data"></prop>
                <prop type="o:number" name="widthRadius"></prop>
                <prop type="a:scene" name="scene" value="Scene()"></prop>
                <prop type="a:vector2" name="globalPosition"></prop>
                <prop type="a:TDRenderer" name="renderer" value="TDRenderer( canvas )"></prop>
                <prop type="a:pieChart" name="pieChart" value="PieChart( data )"></prop>
            </prop-table>

            <meth-table name="Funkce" static="false">
                <meth type="c:constructor" name="PieChartElement ()"></meth>
                <meth type="o:function" name="resize ()"></meth>
                <meth type="o:function" name="initRoot ()"></meth>
                <meth type="o:function" name="initRenderer ()"></meth>
                <meth type="o:function" name="initPieChart ()"></meth>
                <meth type="o:function" name="tick ()"></meth>
                <meth type="o:function" name="remove ()"></meth>
                <meth type="o:function" name="hidden ()"></meth>
                <meth type="o:function" name="isReady ()"></meth>
                <meth virtual type="o:function" name="connectedCallback ()"></meth>
                <meth virtual type="o:function" name="disconnectedCallback ()"></meth>
            </meth-table>

            <sign-table name="Signály">
                <br>
                <sign origin name="resize" emit="false">
                    <p>
                        Poslouchá změnu velikosti okna prohlížeče.
                    </p>
                </sign>
                <sign origin name="remove" emit="false">
                    <p>
                        Poslouchá příkaz eventu, který má odstranit graf ze
                        <a href="?scene">scény</a>.
                    </p>
                </sign>
                <sign origin name="isReadyC" emit="false">
                    <p>
                        Poslouchá příkaz eventu a ptá se, jestli
                        je graf škálovatelný.
                    </p>
                </sign>
                <sign name="hidden" emit="false">
                    <p>
                        Poslopuchá signál, když je graf skrytý.
                    </p>
                </sign>
                <sign origin name="removeInner" emit="true">
                    <p>
                        Vysílá příkaz eventu, který smaže tento element z DOM dokumentu. 
                    </p>
                </sign>
                <sign origin name="isReadyBack" emit="true">
                    <p>
                        Vysílá příkaz eventu, který přeposílá boolean vlastnost
                        škálovatelnosti piechart objektu.
                    </p>
                </sign>
            </sign-table>
            <hr>
            <prop-desc name="Popis Vlastností">
                <prop lambda type="o:function" name="removeHandler">
                    <tab>
                        <get>remove()</get>
                    </tab>
                    <p>
                        Vlastnost inicializuje anonymní funkci, která je posluchačem
                        <s-c>remove</s-c> <a href="#sign-remove">eventu</a> a 
                        spouští <s-c>remove()</s-c> <a href="#meth-remove">funkci</a>.
                    </p>
                </prop>
                <hr>
                <prop lambda type="o:function" name="hiddeHandler">
                    <tab>
                        <get>hidden()</get>
                    </tab>
                    <p>
                        Vlastnost inicializuje anonymní funkci, která je posluchačem
                        <s-c>hidden</s-c> <a href="#sign-hidden">signálu</a> a 
                        spouští <s-c>hidden()</s-c> <a href="#meth-hidden">funkci</a>.
                    </p>
                </prop>
                <hr>
                <prop lambda type="o:function" name="isReadyHandler">
                    <tab>
                        <get>remove()</get>
                    </tab>
                    <p>
                        Vlastnost inicializuje anonymní funkci, která je posluchačem
                        <s-c>isReadyC</s-c> <a href="#sign-isReadyC">eventu</a> a 
                        spouští <s-c>isReady()</s-c> <a href="#meth-isReady">funkci</a>.
                    </p>
                </prop>
                <hr>
                <prop lambda type="o:function" name="resizeHandler">
                    <tab>
                        <get>resize()</get>
                    </tab>
                    <p>
                        Vlastnost inicializuje anonymní funkci, která je posluchačem
                        <s-c>resize</s-c> <a href="#sign-resize">eventu</a> a 
                        spouští <s-c>resize()</s-c> <a href="#meth-resize">funkci</a>.
                    </p>
                </prop>
                <hr>
                <prop type="o:array" name="data">
                    <tab>
                        <get>data()</get>
                    </tab>
                    <p>
                        Data objektů, které reprezentují hodnoty grafu.
                        <br>
                        Získá data z atributu tohoto elementu
                        a převádí jej do listu objektů.
                    </p>
                    <br>
                    <note-info name="Hodnoty objektu">
                        <p>
                            Každý objekt vlastní tyto hodnoty.
                        </p>
                        <br>
                        <para name="name">název dílku.</para>
                        <para name="value">velikost dílku.</para>
                    </note-info>
                    <br>
                    <note-info error>
                        <p>
                            Hodnota atributu <s-c>data</s-c>, se předává přes string,
                            který reprezentuje <s-c>json</s-c> formát.
                        </p>
                    </note-info>
                </prop>
                <hr>
                <prop type="o:number" name="widthRadius">
                    <tab>
                        <get>widthRadius()</get>
                    </tab>
                    <p>
                        Získá hodnotu z atributu <s-c>widthRadius</s-c>
                        a převádí jej na číslo.
                    </p>
                </prop>
                <hr>
                <prop type="a:scene" name="scene">
                    <tab>
                        <value>výchozí:Scene()</value>
                    </tab>
                    <p>
                        Vytváří novou scénu pro tento graf a
                        hned spouští <s-c>ready()</s-c>
                        <a href="?scene#meth-ready">funkci</a>.
                    </p>
                </prop>
                <hr>
                <prop type="a:vector2" name="globalPosition">
                    <tab>
                        <get>globalPosition()</get>
                    </tab>
                    <p>
                        Vektorova globální pozice od středu okna prohlížeče.
                    </p>
                </prop>
                <hr>
                <prop type="a:TDRenderer" name="renderer">
                    <tab>
                        <value>výchozí:TDRenderer( canvas )</value>
                    </tab>
                    <p>
                        Vytváří novou <s-c>TDRenderer</s-c> <a href="?TDRenderer">třídu</a>
                        a do atributu se předává <s-c>canvas</s-c> element.
                    </p>
                </prop>
                <hr>
                <prop type="a:pieChart" name="pieChart">
                    <tab>
                        <value>výchozí:PieChart( data )</value>
                    </tab>
                    <p>
                        Vytváří novou <s-c>PieChart</s-c> <a href="?pieChart">třídu</a>
                        a do atibutu se předává
                        <a href="#prop-data">list objektů</a>.
                    </p>
                </prop>
            </prop-desc>
            <hr>
            <meth-desc name="Popis Funkcí" static="false">
                <meth type="c:constructor" name="PieChartElement ()">
                    <p>
                        Konstruktor inicializuje vlastnosti
                        objektů své třídy a nemá žádné parametry. 
                    </p>
                </meth>
                <hr>
                <meth type="o:function" name="resize ()">
                    <p>
                        <a href="?TDRenderer#meth-setSize">Nastavuje</a>
                        velikost renderingu na velikost okna prohlížeče,
                        inicializuje piechart pozici na <a href="#prop-globalPosition">globální pozici</a>
                        a <a href="?object2D#meth-updateWorld">aktualizuje</a>
                        všechny pozice podřízených objektů ve
                        <a href="#prop-scene">scéně</a>.
                    </p>
                </meth>
                <hr>
                <meth type="o:function" name="initRoot ()">
                    <p>
                        Vytváří novou templatu pro manipulaci <s-c>canvasu</s-c>
                        a přidá se do <s-c>shadowRoot</s-c> tohoto elementu.
                    </p>
                </meth>
                <hr>
                <meth type="o:function" name="initRenderer ()">
                    <p>
                        Vyhledává <s-c>canvas</s-c> z <s-c>shadowRootu</s-c>,
                        <a href="#prop-renderer">inicializuje</a> <s-c>TDRenderer( canvas )</s-c> pomocí
                        hodnoty  <s-c>canvas</s-c>, který je přidělen do atributu konstrukce třídy
                        a <a href="?TDRenderer#meth-setSize">nastavuje</a>
                        velikost renderingu na velikost okna prohlížeče.
                    </p>
                </meth>
                <hr>
                <meth type="o:function" name="initPieChart ()">
                    <p>
                        Inizializuje <s-c>piechart</s-c> <a href="#prop-pieChart">vlastnost</a>
                        na novou <s-c>PieChart</s-c> <a href="?pieChart">třídu</a>,
                        do které se předává <s-c>data</s-c> <a href="#prop-data">vlastnost</a>.
                        <br>
                        U inicializované vlastnosti se přepisuje pozice na
                        <a href="#prop-globalPosition">globální pozici</a>
                        a přepisuje i šířku rádiusu pomocí <s-c>widthRadius</s-c>
                        <a href="#prop-widthRadius">vlastnosti</a>.
                        Potom se <s-c>piechart</s-c> <a href="#prop-pieChart">vlastnost</a>
                        <a href="?basicObject#meth-add">přidá</a> do
                        <a href="#prop-scene">scény</a>.
                    </p>
                </meth>
                <hr>
                <meth type="o:function" name="tick ()">
                    <p>
                        Je procesem, kdy se spouští na snímkové frekvenci
                        vašeho cpu.
                    </p>
                    <br>
                    <p>
                        Je to umožněno <s-c>requestAnimationFrame()</s-c>
                        funkcí, která je určena pro aktualizaci
                        animačního vykreslovacího toku, která
                        spouští opakovaně tuto funkci. Proto je zde vložena
                        <a href="?TDRenderer#meth-render">vykreslovací funkce</a>
                        scén, která manipuluje přímo s <s-c>canvas</s-c>
                        elementem.
                    </p>
                    <br>
                    <p>
                        
                    </p>
                </meth>
                <hr>
                <meth type="o:function" name="remove ()">
                    <p>
                        Spouští proces animace, která postupně schovává graf,
                        až jej uplně odstraní z DOM dokumentu.
                    </p>
                    <br>
                    <p>
                        Po ukončení animace, se vyšle <s-c>hidden</s-c>
                        signál z piechart objektu. Tento
                        <a href="#sign-hidden">signál</a> je připojen k
                        <s-c>hiddeHandler</s-c>
                        <a href="#prop-hiddeHandler">vlastnosti</a>,
                        která dokončuje tento proces pro odstranění grafu.
                    </p>
                </meth>
                <hr>
                <meth type="o:function" name="hidden ()">
                    <p>
                        Pokračuje v procesu odstranění grafu...
                    </p>
                    <br>
                    <p>
                        Vytváří novou <s-c>removeInner</s-c>
                        <a href="#sign-removeInner">událost</a>,
                        která je přeposlána do <s-c>document</s-c> objektu.
                    </p>
                    <br>
                    <note-info warning>
                        <p>
                            Funkce je mostem, pro přechod do jiného
                            scriptu z třetí strany.
                        </p>
                    </note-info>
                </meth>
                <hr>
                <meth type="o:function" name="isReady ()">
                    <p>
                        Zjišťuje, jestli je <s-c>piechart</s-c> škálovatelný.
                    </p>
                    <br>
                    <p>
                        Vytváří novou <s-c>isReadyBack</s-c>
                        <a href="#sign-isReadyBack">událost</a>,
                        do které je přidělena boolean vlastnost škálovatelnosti.
                        S vytvořenou událostí se přistupuje k předávání
                        do <s-c>document</s-c> objektu.
                    </p>
                    <br>
                    <note-info warning>
                        <p>
                            Funkce je mostem, pro přechod do jiného
                            scriptu z třetí strany.
                        </p>
                    </note-info>
                </meth>
                <hr>
                <meth virtual type="o:function" name="connectedCallback ()">
                    <p>
                        Virtuální funkce spouští <s-c>initPieChart()</s-c>
                        <a href="#meth-initPieChart">funkci</a> a <s-c>tick()</s-c>
                        <a href="#meth-tick">funkci</a>.
                        Potom připojuje veškeré <a href="#signals">signály</a>.
                    </p>
                </meth>
                <hr>
                <meth virtual type="o:function" name="disconnectedCallback ()">
                    <p>
                        Virtuální funkce spouští <s-c>free()</s-c>
                        <a href="?basicObject#meth-free">funkci</a> u <s-c>scene</s-c>
                        <a href="#prop-scene">vlastnosti</a>.
                        Potom odpojuje veškeré <a href="#signals">signály</a>.
                    </p>
                </meth>
            </meth-desc>
        </article>
    </body>
</html>
