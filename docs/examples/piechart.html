<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
        <div id="root"></div>

        <cust-piechart></cust-piechart>

        <script src="../src/graph-engine.js"></script>

        <script>
            const root = document.getElementById( 'root' );
            let template = '';
            let isDelete = false;

            document.addEventListener( 'removeInner', () => {

                root.innerHTML = template;

                isDelete = false;

            });

            window.onmessage = ( event ) => {
                
                template = `
                <pie-chart data='${ event.data }' widthRadius="100"></pie-chart>
                `;

                if ( !root.innerHTML ) {

                    root.innerHTML = template;

                } else if ( !isDelete ) {

                    isDelete = true;

                    const removeEvent = new CustomEvent( 'remove' );
                    document.dispatchEvent( removeEvent );

                }

            };
        </script>
    </body>
</html>